<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Leon&#39;s Blog</title>
  
  <subtitle>生命可以归结为一种简单的选择，要么忙于生存，要么赶着去死</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://n-damo.github.io/"/>
  <updated>2019-03-07T07:15:06.000Z</updated>
  <id>http://n-damo.github.io/</id>
  
  <author>
    <name>Li&#39;an Lin</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Y-Haplo</title>
    <link href="http://n-damo.github.io/2019/03/06/Y-Haplo/"/>
    <id>http://n-damo.github.io/2019/03/06/Y-Haplo/</id>
    <published>2019-03-06T06:49:55.000Z</published>
    <updated>2019-03-07T07:15:06.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Ypredict"><a href="#Ypredict" class="headerlink" title="Ypredict"></a>Ypredict</h1><p><strong>Ypredict</strong> is a python based software package that predicts y chromosome haplogroup. Here, I use calculate rank method to automatically find the most likely y haplogroup. For each y haplogroup, I give two mark (T or F) according their snp calling state. For Example, if the haplogroup O2a1a1a2a1 in isogg (<a href="https://isogg.org/tree/" target="_blank" rel="noopener">https://isogg.org/tree/</a>) haplogroup tree has six snps, five snps was observed. If the ratio is 5/6 &gt;= 0.2, I give the T mark. Else, F mark. For each haplogroup, I calculate the number of T mark as n_T, nonexist as n_F, along the routine from the ‘Y’ haplogroup to this haplogroup(rank = (n_T**2)/(n_T + n_F)). If the rank same, the max number of n_T of the haplogroup will be the most likely haplogroup. If rank and n_T are both the same, then ramdomly select the one of mathced haplogroup.</p><ul><li>The current version is 0.0.1  </li></ul><h1 id="Dependence"><a href="#Dependence" class="headerlink" title="Dependence"></a>Dependence</h1><ul><li>vcftools(<a href="http://vcftools.sourceforge.net/" target="_blank" rel="noopener">http://vcftools.sourceforge.net/</a>)</li><li>biopython(<a href="https://biopython.org/wiki/Download" target="_blank" rel="noopener">https://biopython.org/wiki/Download</a>)</li><li>GATK(<a href="https://software.broadinstitute.org/gatk/download/" target="_blank" rel="noopener">https://software.broadinstitute.org/gatk/download/</a>)</li></ul><h1 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h1><hr><h2 id="Step1"><a href="#Step1" class="headerlink" title="Step1"></a>Step1</h2><p>Download y haplogroup tree from isogg. Then, filter snp by snpfilter.py. In this step, hotspot and backmutate snp will be removed. Finally, two files map.json and ref_vcf.gz will be generated.<br><code>python snpfilter.py -snp snp14.3.csv</code>  </p><h2 id="Step2"><a href="#Step2" class="headerlink" title="Step2"></a>Step2</h2><p>In this step, we will use the file ref_vcf.gz generated by the step1 to make snp calling using gatk3.8 UnifiedGenotyper module. Critically, we use hg38 refrence genome in this step.</p><p><code>java -Xmx32g -jar GenomeAnalysisTK.jar -T UnifiedGenotyper -R hg38.fa -I *.bam -o y.vcf.gz --intervals chrY -ploidy 1 --output_mode EMIT_ALL_SITES --genotyping_mode GENOTYPE_GIVEN_ALLELES --alleles ref_vcf.gz</code>  </p><h2 id="Step3"><a href="#Step3" class="headerlink" title="Step3"></a>Step3</h2><p>Y chromosome haplogroup can be predicted by ypredict.py. In the this step, the scrip will automatically output the most likely haplogroup. The final result can be seen in ypredict.txt. More detail output write in ystatistics.csv.</p><p><code>python ypredict.py -vcf y.vcf.gz -s hfspecial.xlsx -m map.json</code></p><p>If you need to update y haplogroup tree file downloaded from isogg, you can redo step1 and get an updated map.json.  </p><h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1><p><code>git clone https://github.com/N-damo/ypredict-master.git</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Ypredict&quot;&gt;&lt;a href=&quot;#Ypredict&quot; class=&quot;headerlink&quot; title=&quot;Ypredict&quot;&gt;&lt;/a&gt;Ypredict&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;Ypredict&lt;/strong&gt; is a python based so
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>hexo</title>
    <link href="http://n-damo.github.io/2019/03/06/hexo/"/>
    <id>http://n-damo.github.io/2019/03/06/hexo/</id>
    <published>2019-03-06T00:48:17.000Z</published>
    <updated>2019-03-06T07:15:10.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="HEXO"><a href="#HEXO" class="headerlink" title="HEXO"></a>HEXO</h1><h2 id="step1"><a href="#step1" class="headerlink" title="step1"></a>step1</h2><p>hexo init myblog<br>hexo new ‘firstblog’<br>hexo g<br>hexo d  </p><h2 id="step2"><a href="#step2" class="headerlink" title="step2"></a>step2</h2><p>部署：<br>修改站点配置文件：<br>deploy:<br>  type: git<br>  repository: <a href="mailto:github@github.com" target="_blank" rel="noopener">github@github.com</a>:N-damo.github.io.git<br>  branch: master<br>运行：npm install hexo-deployer-git –save<br>运行：hexo g（本地生成静态文件）<br>运行：hexo d（将本地静态文件推送至Github）<br>打开浏览器，访问<a href="https://n-damo.github.io" target="_blank" rel="noopener">https://n-damo.github.io</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;HEXO&quot;&gt;&lt;a href=&quot;#HEXO&quot; class=&quot;headerlink&quot; title=&quot;HEXO&quot;&gt;&lt;/a&gt;HEXO&lt;/h1&gt;&lt;h2 id=&quot;step1&quot;&gt;&lt;a href=&quot;#step1&quot; class=&quot;headerlink&quot; title=&quot;step1&quot;&gt;
      
    
    </summary>
    
    
  </entry>
  
</feed>
